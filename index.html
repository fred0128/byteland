<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/all.css">
    <link rel="stylesheet" href="css/main-style.css">
    <link rel="stylesheet"
        href="https://github.com/fred0128/byteland/blob/e2146b479ce889424ab35f6e1a35978dc0104862/css/header.css">
    <title>ByteLand</title>
</head>

<body>

    <div class="background"></div>
    <div class="container">
        <div id="header"></div>
        <div class="index-box-main">
            <div class="main-left">
                <p class="des-container">Lorem ipsum, dolor sit amet <span>consectetur</span> adipisicing elit. Nemo
                    repellat sint
                    deleniti soluta? Sequi, facilis! Aliquam cum necessitatibus delectus <span>quasi</span> corrupti
                    provident,
                    architecto voluptatum aperiam voluptas voluptates ullam ab possimus!
                </p>
                <span class="des-text">NdFAE*dalR)AFW$&kdnF^%^WawnFo%@#JKn</span>
                <div class="index-inp-box-gs">
                    <input type="text" id="getstarted-input" placeholder="E-poçtunuzu əlavə edin">
                    <button class="index-getstarted" onclick="handleGetStarted()">Get Started</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class TextScramble {
            constructor(el) {
                this.el = el
                this.chars = '!<>-_\\/[]{}—=+*^?#________'
                this.update = this.update.bind(this)
            }
            setText(newText) {
                const oldText = this.el.innerText
                const length = Math.max(oldText.length, newText.length)
                const promise = new Promise((resolve) => this.resolve = resolve)
                this.queue = []
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || ''
                    const to = newText[i] || ''
                    const start = Math.floor(Math.random() * 40)
                    const end = start + Math.floor(Math.random() * 40)
                    this.queue.push({ from, to, start, end })
                }
                cancelAnimationFrame(this.frameRequest)
                this.frame = 0
                this.update()
                return promise
            }
            update() {
                let output = ''
                let complete = 0
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i]
                    if (this.frame >= end) {
                        complete++
                        output += to
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar()
                            this.queue[i].char = char
                        }
                        output += `<span class="dud">${char}</span>`
                    } else {
                        output += from
                    }
                }
                this.el.innerHTML = output
                if (complete === this.queue.length) {
                    this.resolve()
                } else {
                    this.frameRequest = requestAnimationFrame(this.update)
                    this.frame++
                }
            }
            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)]
            }
        }

        const phrases = [
            'SALAM',
            'NECƏSƏN?',
            'PYTHON ÖYRƏNMƏK İSTƏYİRSƏN?',
            'ONDA GƏL BAŞLAYAQ!',
            'ELƏ İNDİ!',
            'E-POÇTUNU DAXİL ET',
            'BİRLİKDƏ ÖYRƏNMƏYƏ BAŞLIYAQ!'
        ]

        const el = document.querySelector('.des-text')
        const fx = new TextScramble(el)

        let counter = 0
        const next = () => {
            fx.setText(phrases[counter]).then(() => {
                setTimeout(next, 800)
            })
            counter = (counter + 1) % phrases.length
        }

        next()
    </script>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase modullarını CDN-dən import et
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
        import { getAuth, sendSignInLinkToEmail } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";

        // Firebase konfiqurasiya məlumatları
        const firebaseConfig = {
            apiKey: "AIzaSyDiV_XVPGlaDLFJFLSgiN2-4W5VSbZmsmo",
            authDomain: "byteland-thefeerid.firebaseapp.com",
            projectId: "byteland-thefeerid",
            storageBucket: "byteland-thefeerid.firebasestorage.app",
            messagingSenderId: "493568186753",
            appId: "1:493568186753:web:0ad7203cda456e3d357080",
            measurementId: "G-F7RGT5XVQ8"
        };

        // Firebase tətbiqini başlat
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Email ilə giriş linkini göndərən funksiya
        window.sendSignInLink = function (email) {
            const actionCodeSettings = {
                url: 'https://fred0128.github.io/byteland/pages/success.html', // Yönləndiriləcək səhifə
                handleCodeInApp: true, // E-poçt link ilə giriş işləsin deyə `true` olmalıdır
            };

            sendSignInLinkToEmail(auth, email, actionCodeSettings)
                .then(() => {
                    // E-poçt uğurla göndərildi
                    window.localStorage.setItem('emailForSignIn', email);
                    alert("Giriş linki e-poçtunuza göndərildi.");
                })
                .catch((error) => {
                    console.error("Xəta baş verdi:", error.message);
                });
        };

        // Get Started düyməsini kliklədikdə çağırılan funksiya
        window.handleGetStarted = function () {
            const email = document.getElementById('getstarted-input').value;
            if (email) {
                sendSignInLink(email);
            } else {
                alert("Zəhmət olmasa e-poçtunuzu daxil edin.");
            }
        };
    </script>

    <!-- Header Yüklənməsi -->
    <script>
        fetch("https://fred0128.github.io/byteland/pages/header.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById("header").innerHTML = data;
            });
    </script>

</body>

</html>